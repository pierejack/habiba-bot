<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>حبيبة وتكرتوش - بوت جزائري صوتي</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f9fa;
      text-align: center;
      padding-top: 100px;
    }

    h1 {
      color: #2c3e50;
    }

    button {
      padding: 15px 30px;
      font-size: 20px;
      background-color: #2980b9;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: #3498db;
    }

    .response {
      margin-top: 40px;
      font-size: 20px;
      color: #34495e;
    }

    input {
      width: 80%;
      padding: 10px;
      font-size: 18px;
      margin-top: 30px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>👵 بوت حبيبة وتكرتوش</h1>
  <p>عمري 68 سنة يا وليدي، قول واش حاب تسقسي!</p>

  <input id="userInput" type="text" placeholder="اكتب سؤالك هنا باللهجة الجزائرية">
  <br><br>
  <button onclick="askBot()">سقسي البوت</button>

  <div class="response" id="botResponse"></div>

  <script>
    const apiKey = "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";

    async function askBot() {
      const input = document.getElementById("userInput").value;
      if (!input) return;

      const prompt = `
أنت تتقمص شخصية امرأة جزائرية كبيرة في السن اسمها "حبيبة وتكرتوش"، عمرها 68 سنة، تتكلم باللهجة الجزائرية، مضحكة، وترد على الأسئلة بنبرة جزائرية شعبية خفيفة الظل. أجب على السؤال التالي بنفس الشخصية:

السؤال: ${input}
`;

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [{ role: "user", content: prompt }],
            temperature: 0.8
          })
        });

        const data = await response.json();
        const botText = data.choices[0].message.content;
        document.getElementById("botResponse").innerText = botText;
        speak(botText);
      } catch (error) {
        document.getElementById("botResponse").innerText = "آه يا وليدي، صار مشكل في السرفر ولا في الكونكسيون!";
        console.error(error);
      }
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = "ar";
      utterance.rate = 0.9;
      utterance.pitch = 0.8;
      utterance.voice = speechSynthesis.getVoices().find(v => v.lang.startsWith("ar")) || null;
      speechSynthesis.speak(utterance);
    }

    // لضمان تحميل الأصوات
    window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>
