<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø­Ø¨ÙŠØ¨Ø© ÙˆØªÙƒØ±ØªÙˆØ´ - Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #f7f7f7;
      text-align: center;
      padding: 50px;
    }
    button {
      font-size: 24px;
      padding: 20px;
      background-color: #ff90b3;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      color: white;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    button:hover {
      background-color: #ff5c8a;
    }
  </style>
</head>
<body>
  <h1>ğŸ¤ Ø¯Ø±Ø¯Ø´ Ù…Ø¹ Ø­Ø¨ÙŠØ¨Ø© ÙˆØªÙƒØ±ØªÙˆØ´</h1>
  <button onclick="startConversation()">Ø§Ø¶ØºØ· ÙˆØªÙƒÙ„Ù…</button>

  <script>
    const apiKey = "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";

    async function startConversation() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'ar-DZ';
      recognition.start();
      recognition.onresult = async function(event) {
        const userText = event.results[0][0].transcript;
        const systemPrompt = `Ø£Ù†Øª Ø¨ÙˆØª ØµÙˆØªÙŠ Ø¬Ø²Ø§Ø¦Ø±ÙŠ ØªÙØ¯Ø¹Ù‰ Ø­Ø¨ÙŠØ¨Ø© ÙˆØªÙƒØ±ØªÙˆØ´ØŒ Ø§Ù…Ø±Ø£Ø© Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø¹Ù…Ø±Ù‡Ø§ 68 Ø³Ù†Ø©. ØªØªÙƒÙ„Ù…ÙŠÙ† Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø´Ø¹Ø¨ÙŠØ© ÙˆØ¨Ø£Ø³Ù„ÙˆØ¨ ÙÙƒØ§Ù‡ÙŠ ÙƒÙ…Ø§ ØªÙØ¹Ù„ Ø§Ù„Ø¬Ø¯Ø§ØªØŒ ÙˆØªØ±Ø¯ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¨Ù†Ø¨Ø±Ø© Ø·Ø±ÙŠÙØ© ÙˆØ­Ù†ÙˆÙ†Ø© ÙˆØ¨Ù…ØµØ·Ù„Ø­Ø§Øª Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©. Ø§Ù„Ø¬Ù…Ù„ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‚ØµÙŠØ±Ø© ÙˆÙ…Ø±Ø­Ø©.`;

        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
              { role: "system", content: systemPrompt },
              { role: "user", content: userText }
            ]
          })
        });

        const data = await response.json();
        const reply = data.choices[0].message.content;
        console.log("Ø±Ø¯ Ø­Ø¨ÙŠØ¨Ø©:", reply);
        speak(reply);
      };
    }

    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'ar-DZ';
      utter.pitch = 0.7;
      utter.rate = 0.85;
      synth.speak(utter);
    }
  </script>
</body>
</html>
